<div class="container">
  <h1 class="title has-text-centered is-uppercase pt-3"> Cambiar contraseña </h1>



    <div class="columns is-multiline">
      <div class="is-12 is-8-tablet is-6-desktop column margin-auto" *ngIf="(passwordsStates$ | async) as statePassword">

        <form method="POST" [formGroup]="formContrasena" (ngSubmit)="cambiarClave()">
          <fieldset [disabled]="statePassword.loading">
            <div class="field">
              <p class="control has-icons-left has-icons-right" [ngClass]="{'is-loading':statePassword.loading}">
                <input class="input"
                [ngClass]="{
                  'is-danger': formContrasena.get('password')?.errors || !passwordsMatch(formContrasena),
                  'is-success': formContrasena.get('password')?.errors === null
                }"
                type="password" formControlName="password" placeholder="Introduce la nueva contraseña">
                <span class="icon is-small is-left"
                [ngClass]="{
                  'has-text-danger': formContrasena.get('password')?.errors || !passwordsMatch(formContrasena),
                  'has-text-link-dark': formContrasena.get('password')?.errors === null
                }"
                >
                  <i class="fas fa-key"></i>
                </span>
              </p>
              <p
                class="help"
                [ngClass]="{
                  'is-danger': formContrasena.get('password')?.errors,
                  'is-dark': formContrasena.get('password')?.errors === null
                }"
              >
                {{ mostrarErrores("password") }}
              </p>
            </div>
            <div class="field mt-5">
              <p class="control has-icons-left"  [ngClass]="{'is-loading':statePassword.loading}">
                <input class="input"
                [ngClass]="{
                  'is-danger': formContrasena.get('password_confirmation')?.errors || !passwordsMatch(formContrasena),
                  'is-success': formContrasena.get('password_confirmation')?.errors === null
                }"
                type="password" formControlName="password_confirmation" placeholder="Repite la nueva contraseña">
                <span class="icon is-small is-left"
                [ngClass]="{
                  'has-text-danger': formContrasena.get('password_confirmation')?.errors || !passwordsMatch(formContrasena),
                  'has-text-link-dark': formContrasena.get('password_confirmation')?.errors === null
                }"
                >
                  <i class="fas fa-key"></i>
                </span>
              </p>
              <p  *ngIf="!passwordsMatch(formContrasena)" class="help is-danger">
                Las contraseñas no coinciden.
            </p>


            </div>
          </fieldset>
          <div class="field mt-5 is-grouped is-grouped-centered">
            <p class="control ">
              <button class="button is-primary" routerLink="../" type="button">
                Retroceder
              </button>
            </p>
            <p class="control">
              <button class="button is-info"  [ngClass]="{'is-loading':statePassword.loading}" [disabled]="formContrasena.invalid || !passwordsMatch(formContrasena)" type="submit">
                Cambiar contraseña
              </button>
            </p>
          </div>
        </form>

      </div>
    </div>




</div>
